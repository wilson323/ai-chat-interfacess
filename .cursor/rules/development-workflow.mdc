---
alwaysApply: true
trigger: always_on
---

# ğŸ”„ å¼€å‘å·¥ä½œæµç¨‹è§„èŒƒ

## ğŸ¯ æ ¸å¿ƒåŸåˆ™

### 1. è§„åˆ™é©±åŠ¨å¼€å‘
- **å¼€å‘å‰å¿…è¯»**: æ¯æ¬¡å¼€å‘å‰å¿…é¡»é˜…è¯»PROJECT_RULES.md
- **è§„åˆ™æ£€æŸ¥**: ä½¿ç”¨`npm run check-rules`éªŒè¯è§„åˆ™æ‰§è¡Œ
- **è´¨é‡ä¼˜å…ˆ**: ç¡®ä¿ä»£ç è´¨é‡è¾¾åˆ°ç”Ÿäº§çº§åˆ«æ ‡å‡†
- **æŒç»­æ”¹è¿›**: æ ¹æ®è§„åˆ™æ‰§è¡Œæƒ…å†µæŒç»­ä¼˜åŒ–

## ğŸ“‹ å¼€å‘å‰æ£€æŸ¥æ¸…å•

### 1. è§„åˆ™é˜…è¯»æ£€æŸ¥
- [ ] å·²é˜…è¯» [PROJECT_RULES.md](../PROJECT_RULES.md)
- [ ] ç¡®è®¤ä½¿ç”¨æˆç†Ÿç»„ä»¶åº“ (shadcn/ui > Ant Design > Radix UI)
- [ ] è¯„ä¼°è‡ªå®šä¹‰ä»£ç å æ¯” < 20%
- [ ] ç¡®è®¤æµ‹è¯•è¦†ç›–ç‡ â‰¥ 80%
- [ ] éªŒè¯å®‰å…¨è§„èŒƒéµå¾ª

### 2. ç¯å¢ƒå‡†å¤‡æ£€æŸ¥
- [ ] ç¯å¢ƒé…ç½®æ­£ç¡®
- [ ] ä¾èµ–å®‰è£…å®Œæ•´
- [ ] æ•°æ®åº“è¿æ¥æ­£å¸¸
- [ ] å¼€å‘å·¥å…·é…ç½®æ­£ç¡®

### 3. ä»£ç è´¨é‡æ£€æŸ¥
- [ ] TypeScriptä¸¥æ ¼æ¨¡å¼å¯ç”¨
- [ ] ESLinté…ç½®æ­£ç¡®
- [ ] Prettieré…ç½®æ­£ç¡®
- [ ] æµ‹è¯•ç¯å¢ƒå‡†å¤‡å°±ç»ª

## ğŸ”„ å¼€å‘å·¥ä½œæµç¨‹

### 1. éœ€æ±‚åˆ†æé˜¶æ®µ
```typescript
// éœ€æ±‚åˆ†ææ£€æŸ¥æ¸…å•
- [ ] æ˜ç¡®åŠŸèƒ½éœ€æ±‚
- [ ] è¯†åˆ«æŠ€æœ¯éš¾ç‚¹
- [ ] è¯„ä¼°ç°æœ‰ç»„ä»¶åº“æ”¯æŒ
- [ ] ç¡®å®šè‡ªå®šä¹‰ä»£ç èŒƒå›´
- [ ] è§„åˆ’æµ‹è¯•ç­–ç•¥
- [ ] è¯„ä¼°æ€§èƒ½å½±å“
```

### 2. è®¾è®¡é˜¶æ®µ
```typescript
// è®¾è®¡é˜¶æ®µæ£€æŸ¥æ¸…å•
- [ ] UIè®¾è®¡ç¬¦åˆè®¾è®¡ç³»ç»Ÿ
- [ ] ç»„ä»¶è®¾è®¡åŸºäºæˆç†Ÿåº“
- [ ] APIè®¾è®¡éµå¾ªRESTfulè§„èŒƒ
- [ ] æ•°æ®åº“è®¾è®¡è§„èŒƒåŒ–
- [ ] é”™è¯¯å¤„ç†ç­–ç•¥æ˜ç¡®
- [ ] å®‰å…¨è€ƒè™‘å‘¨å…¨
```

### 3. å¼€å‘é˜¶æ®µ
```typescript
// å¼€å‘é˜¶æ®µæ£€æŸ¥æ¸…å•
- [ ] ç¯å¢ƒé…ç½®æ­£ç¡®
- [ ] ä½¿ç”¨æˆç†Ÿç»„ä»¶åº“
- [ ] è‡ªå®šä¹‰ä»£ç å æ¯” < 20%
- [ ] å•å…ƒæµ‹è¯•è¦†ç›– > 80%
- [ ] ä»£ç æ³¨é‡Šå®Œæ•´
- [ ] é”™è¯¯å¤„ç†å®Œå–„
```

### 4. æµ‹è¯•é˜¶æ®µ
```typescript
// æµ‹è¯•é˜¶æ®µæ£€æŸ¥æ¸…å•
- [ ] å•å…ƒæµ‹è¯•è¦†ç›–ç‡ > 80%
- [ ] é›†æˆæµ‹è¯•è¦†ç›–ç‡ > 60%
- [ ] ç«¯åˆ°ç«¯æµ‹è¯•é€šè¿‡
- [ ] æ€§èƒ½æµ‹è¯•é€šè¿‡
- [ ] å®‰å…¨æµ‹è¯•é€šè¿‡
- [ ] æ— éšœç¢æµ‹è¯•é€šè¿‡
```

### 5. éƒ¨ç½²é˜¶æ®µ
```typescript
// éƒ¨ç½²é˜¶æ®µæ£€æŸ¥æ¸…å•
- [ ] æ„å»ºæˆåŠŸ
- [ ] ç¯å¢ƒé…ç½®æ­£ç¡®
- [ ] å¥åº·æ£€æŸ¥é€šè¿‡
- [ ] ç›‘æ§é…ç½®å®Œæˆ
- [ ] æ–‡æ¡£æ›´æ–°å®Œæˆ
- [ ] å›æ»šè®¡åˆ’å‡†å¤‡
```

## ğŸ” è§„åˆ™æ£€æŸ¥æœºåˆ¶

### 1. è‡ªåŠ¨åŒ–æ£€æŸ¥å‘½ä»¤
```bash
# è¿è¡Œæ‰€æœ‰è§„åˆ™æ£€æŸ¥
npm run check-rules

# æ£€æŸ¥ä»£ç è´¨é‡
npm run check-code

# æ£€æŸ¥è‡ªå®šä¹‰ä»£ç å æ¯”
npm run check:custom-ratio

# æ£€æŸ¥ç¯å¢ƒé…ç½®
npm run check:config

# æ£€æŸ¥æ•°æ®åº“è¿æ¥
npm run check:db
```

### 2. å¼€å‘è¿‡ç¨‹ä¸­æ£€æŸ¥
```typescript
// ç»„ä»¶å¼€å‘æ—¶æ£€æŸ¥
- [ ] ä¼˜å…ˆä½¿ç”¨shadcn/uiç»„ä»¶
- [ ] å¤æ‚ç»„ä»¶ä½¿ç”¨Ant Design
- [ ] æ— éšœç¢ç»„ä»¶ä½¿ç”¨Radix UI
- [ ] é¿å…é‡å¤é€ è½®å­
- [ ] è‡ªå®šä¹‰ä»£ç å æ¯” < 20%

// APIå¼€å‘æ—¶æ£€æŸ¥
- [ ] ç»Ÿä¸€å“åº”æ ¼å¼
- [ ] ç»Ÿä¸€é”™è¯¯å¤„ç†
- [ ] ä½¿ç”¨ZodéªŒè¯
- [ ] éµå¾ªRESTfulè§„èŒƒ
- [ ] å®‰å…¨éªŒè¯å®Œå–„

// æµ‹è¯•ç¼–å†™æ—¶æ£€æŸ¥
- [ ] å•å…ƒæµ‹è¯•è¦†ç›–ç‡ > 80%
- [ ] é›†æˆæµ‹è¯•è¦†ç›–ç‡ > 60%
- [ ] å…³é”®ä¸šåŠ¡é€»è¾‘è¦†ç›–ç‡ > 90%
- [ ] è¦†ç›–è¾¹ç•Œæ¡ä»¶å’Œå¼‚å¸¸æƒ…å†µ
- [ ] æµ‹è¯•ç”¨ä¾‹æ¸…æ™°å¯è¯»
```

### 3. ä»£ç æäº¤å‰æ£€æŸ¥
```typescript
// æäº¤å‰æ£€æŸ¥æ¸…å•
- [ ] ä»£ç è´¨é‡æ£€æŸ¥é€šè¿‡
- [ ] è‡ªå®šä¹‰ä»£ç å æ¯” < 20%
- [ ] æµ‹è¯•è¦†ç›–ç‡è¾¾æ ‡
- [ ] è§„åˆ™ä¸€è‡´æ€§éªŒè¯
- [ ] æ€§èƒ½æŒ‡æ ‡æ£€æŸ¥
- [ ] å®‰å…¨æ‰«æé€šè¿‡
- [ ] ä»£ç å®¡æŸ¥é€šè¿‡
```

## ğŸ“š è§„åˆ™å¼•ç”¨æŒ‡å—

### 1. å¼€å‘è¿‡ç¨‹ä¸­å¿…é¡»å¼•ç”¨
```typescript
// ç»„ä»¶å¼€å‘å‰å¼•ç”¨
/**
 * ç»„ä»¶å¼€å‘è§„åˆ™å¼•ç”¨:
 * 1. ä¼˜å…ˆä½¿ç”¨ shadcn/ui ç»„ä»¶
 * 2. å¤æ‚ä¸šåŠ¡ç»„ä»¶ä½¿ç”¨ Ant Design
 * 3. è‡ªå®šä¹‰ä»£ç å æ¯” < 20%
 * 4. éµå¾ªå•ä¸€èŒè´£åŸåˆ™
 * 
 * @see PROJECT_RULES.md - ç»„ä»¶åº“ä½¿ç”¨è§„èŒƒ
 */

// APIå¼€å‘å‰å¼•ç”¨
/**
 * APIå¼€å‘è§„åˆ™å¼•ç”¨:
 * 1. ç»Ÿä¸€å“åº”æ ¼å¼
 * 2. ç»Ÿä¸€é”™è¯¯å¤„ç†
 * 3. ä½¿ç”¨ZodéªŒè¯
 * 4. éµå¾ªRESTfulè§„èŒƒ
 * 
 * @see PROJECT_RULES.md - ä»£ç è´¨é‡è§„èŒƒ
 */

// æµ‹è¯•ç¼–å†™å‰å¼•ç”¨
/**
 * æµ‹è¯•ç¼–å†™è§„åˆ™å¼•ç”¨:
 * 1. å•å…ƒæµ‹è¯•è¦†ç›–ç‡ â‰¥ 80%
 * 2. é›†æˆæµ‹è¯•è¦†ç›–ç‡ â‰¥ 60%
 * 3. å…³é”®ä¸šåŠ¡é€»è¾‘è¦†ç›–ç‡ â‰¥ 90%
 * 4. è¦†ç›–è¾¹ç•Œæ¡ä»¶å’Œå¼‚å¸¸æƒ…å†µ
 * 
 * @see PROJECT_RULES.md - æµ‹è¯•è§„èŒƒ
 */
```

### 2. è§„åˆ™æ›´æ–°æµç¨‹
```typescript
// è§„åˆ™æ›´æ–°æµç¨‹
1. è§„åˆ™å˜æ›´å¿…é¡»ç»è¿‡å›¢é˜Ÿè¯„å®¡
2. æ›´æ–°PROJECT_RULES.mdæ–‡æ¡£
3. æ›´æ–°.cursor/rules/ç›®å½•ä¸‹çš„è§„åˆ™æ–‡ä»¶
4. é€šçŸ¥æ‰€æœ‰å¼€å‘äººå‘˜
5. æ›´æ–°ç›¸å…³æ£€æŸ¥è„šæœ¬
6. éªŒè¯è§„åˆ™æ‰§è¡Œæ•ˆæœ
7. è®°å½•å˜æ›´æ—¥å¿—
```

## ğŸš¨ å¸¸è§è¿è§„æƒ…å†µ

### 1. ç»„ä»¶åº“ä½¿ç”¨è¿è§„
```typescript
// âŒ é”™è¯¯ï¼šè‡ªå®šä¹‰åŸºç¡€æŒ‰é’®
function CustomButton() {
  return <button className="custom-btn">Click me</button>
}

// âœ… æ­£ç¡®ï¼šä½¿ç”¨shadcn/uiç»„ä»¶
import { Button } from '@/components/ui/button'
function MyButton() {
  return <Button>Click me</Button>
}
```

### 2. TypeScriptä½¿ç”¨è¿è§„
```typescript
// âŒ é”™è¯¯ï¼šä½¿ç”¨anyç±»å‹
function processData(data: any) {
  return data.someProperty
}

// âœ… æ­£ç¡®ï¼šä½¿ç”¨ä¸¥æ ¼ç±»å‹
interface DataType {
  someProperty: string
}
function processData(data: DataType) {
  return data.someProperty
}
```

### 3. é”™è¯¯å¤„ç†è¿è§„
```typescript
// âŒ é”™è¯¯ï¼šæ²¡æœ‰é”™è¯¯å¤„ç†
async function fetchData() {
  const response = await fetch('/api/data')
  return response.json()
}

// âœ… æ­£ç¡®ï¼šç»Ÿä¸€é”™è¯¯å¤„ç†
async function fetchData() {
  try {
    const response = await fetch('/api/data')
    if (!response.ok) {
      throw new ApiError('FETCH_FAILED', 'Failed to fetch data', response.status)
    }
    return response.json()
  } catch (error) {
    return handleError(error)
  }
}
```

## ğŸ“Š è´¨é‡æŒ‡æ ‡ç›‘æ§

### 1. ä»£ç è´¨é‡æŒ‡æ ‡
```typescript
// è´¨é‡æŒ‡æ ‡è¦æ±‚
- è‡ªå®šä¹‰ä»£ç å æ¯”: < 20%
- å•å…ƒæµ‹è¯•è¦†ç›–ç‡: â‰¥ 80%
- é›†æˆæµ‹è¯•è¦†ç›–ç‡: â‰¥ 60%
- å…³é”®ä¸šåŠ¡é€»è¾‘è¦†ç›–ç‡: â‰¥ 90%
- ä»£ç é‡å¤ç‡: < 3%
- åœˆå¤æ‚åº¦: < 10
```

### 2. æ€§èƒ½æŒ‡æ ‡
```typescript
// æ€§èƒ½æŒ‡æ ‡è¦æ±‚
- é¦–å±åŠ è½½æ—¶é—´: < 3ç§’
- APIå“åº”æ—¶é—´: < 500ms
- å†…å­˜ä½¿ç”¨ç‡: < 80%
- åŒ…ä½“ç§¯å¢é•¿: < 10%
```

### 3. ç›‘æ§å‘½ä»¤
```bash
# æ£€æŸ¥ä»£ç è´¨é‡
npm run check-code

# æ£€æŸ¥è‡ªå®šä¹‰ä»£ç å æ¯”
npm run check:custom-ratio

# æ£€æŸ¥æµ‹è¯•è¦†ç›–ç‡
npm run test:coverage

# æ£€æŸ¥æ€§èƒ½æŒ‡æ ‡
npm run test:performance
```

## ğŸ¯ è§„åˆ™æ‰§è¡Œç›®æ ‡

### 1. çŸ­æœŸç›®æ ‡
- æ‰€æœ‰å¼€å‘äººå‘˜ä¸¥æ ¼éµå®ˆé¡¹ç›®è§„åˆ™
- ä»£ç è´¨é‡è¾¾åˆ°ç”Ÿäº§çº§åˆ«æ ‡å‡†
- æµ‹è¯•è¦†ç›–ç‡å…¨é¢è¾¾æ ‡
- è§„åˆ™æ£€æŸ¥è‡ªåŠ¨åŒ–å®Œæˆ

### 2. ä¸­æœŸç›®æ ‡
- å»ºç«‹è§„åˆ™æ‰§è¡Œç›‘æ§ä½“ç³»
- æŒç»­ä¼˜åŒ–è§„åˆ™å†…å®¹
- æå‡å›¢é˜Ÿè§„åˆ™æ‰§è¡Œæ•ˆç‡
- å»ºç«‹è§„åˆ™åŸ¹è®­ä½“ç³»

### 3. é•¿æœŸç›®æ ‡
- è§„åˆ™æˆä¸ºå›¢é˜Ÿæ–‡åŒ–çš„ä¸€éƒ¨åˆ†
- é¡¹ç›®è´¨é‡æŒç»­æå‡
- å¼€å‘æ•ˆç‡æ˜¾è‘—æé«˜
- æˆä¸ºè¡Œä¸šæ ‡æ†é¡¹ç›®

## âš ï¸ é‡è¦æé†’

1. **è§„åˆ™ä¼˜å…ˆ**: æ‰€æœ‰å¼€å‘å·¥ä½œéƒ½å¿…é¡»ä¸¥æ ¼éµå®ˆé¡¹ç›®è§„åˆ™
2. **è´¨é‡è‡³ä¸Š**: ç¡®ä¿ä»£ç è´¨é‡è¾¾åˆ°ç”Ÿäº§çº§åˆ«æ ‡å‡†
3. **æŒç»­æ”¹è¿›**: æ ¹æ®è§„åˆ™æ‰§è¡Œæƒ…å†µæŒç»­ä¼˜åŒ–
4. **å›¢é˜Ÿåä½œ**: ç¡®ä¿æ‰€æœ‰å›¢é˜Ÿæˆå‘˜éƒ½äº†è§£å¹¶éµå®ˆè§„åˆ™
5. **å·¥å…·æ”¯æŒ**: å……åˆ†åˆ©ç”¨è‡ªåŠ¨åŒ–æ£€æŸ¥å·¥å…·

**è®°ä½: è§„åˆ™ä¸æ˜¯é™åˆ¶ï¼Œè€Œæ˜¯ä¿éšœã€‚ä¸¥æ ¼éµå®ˆè§„åˆ™ï¼Œç¡®ä¿é¡¹ç›®é«˜è´¨é‡äº¤ä»˜ï¼**
---
alwaysApply: true
trigger: always_on
---

# ğŸ“¦ ç»„ä»¶åº“ä½¿ç”¨è§„èŒƒ

## ğŸ¯ æ ¸å¿ƒåŸåˆ™

### 1. æˆç†Ÿç»„ä»¶åº“ä¼˜å…ˆ
- **è‡ªå®šä¹‰ä»£ç å æ¯”**: < 20%
- **shadcn/uiä¼˜å…ˆ**: åŸºäºRadix UIçš„æ— éšœç¢ç»„ä»¶
- **Ant Designè¡¥å……**: ä¼ä¸šçº§å¤æ‚ç»„ä»¶
- **é¿å…é‡å¤é€ è½®å­**: ä¼˜å…ˆä½¿ç”¨ç°æœ‰è§£å†³æ–¹æ¡ˆ

## ğŸ“¦ ç»„ä»¶åº“ä¼˜å…ˆçº§

### 1. shadcn/ui (æœ€é«˜ä¼˜å…ˆçº§)
```typescript
// âœ… åŸºç¡€UIç»„ä»¶ - å¿…é¡»ä½¿ç”¨shadcn/ui
import { Button } from '@/components/ui/button'
import { Input } from '@/components/ui/input'
import { Card } from '@/components/ui/card'
import { Dialog } from '@/components/ui/dialog'
import { AlertDialog } from '@/components/ui/alert-dialog'
import { Select } from '@/components/ui/select'
import { Checkbox } from '@/components/ui/checkbox'
import { RadioGroup } from '@/components/ui/radio-group'
import { Switch } from '@/components/ui/switch'
import { Slider } from '@/components/ui/slider'
import { Progress } from '@/components/ui/progress'
import { Skeleton } from '@/components/ui/skeleton'
import { Badge } from '@/components/ui/badge'
import { Avatar } from '@/components/ui/avatar'
import { Separator } from '@/components/ui/separator'
import { Tabs } from '@/components/ui/tabs'
import { Accordion } from '@/components/ui/accordion'
import { Collapsible } from '@/components/ui/collapsible'
import { Popover } from '@/components/ui/popover'
import { Tooltip } from '@/components/ui/tooltip'
import { DropdownMenu } from '@/components/ui/dropdown-menu'
import { ContextMenu } from '@/components/ui/context-menu'
import { HoverCard } from '@/components/ui/hover-card'
import { Sheet } from '@/components/ui/sheet'
import { Drawer } from '@/components/ui/drawer'
import { Breadcrumb } from '@/components/ui/breadcrumb'
import { Pagination } from '@/components/ui/pagination'
import { Calendar } from '@/components/ui/calendar'
import { Command } from '@/components/ui/command'
import { Table } from '@/components/ui/table'
import { Form } from '@/components/ui/form'
import { Label } from '@/components/ui/label'
import { Textarea } from '@/components/ui/textarea'
import { Toast } from '@/components/ui/toast'
import { Sonner } from '@/components/ui/sonner'
```

### 2. Ant Design (å¤æ‚ä¸šåŠ¡ç»„ä»¶)
```typescript
// âœ… å¤æ‚ä¸šåŠ¡ç»„ä»¶ - ä½¿ç”¨Ant Design
import { Table } from 'antd' // å¤æ‚è¡¨æ ¼
import { Form } from 'antd' // å¤æ‚è¡¨å•
import { DatePicker } from 'antd' // æ—¥æœŸé€‰æ‹©å™¨
import { TimePicker } from 'antd' // æ—¶é—´é€‰æ‹©å™¨
import { Upload } from 'antd' // æ–‡ä»¶ä¸Šä¼ 
import { Tree } from 'antd' // æ ‘å½¢æ§ä»¶
import { TreeSelect } from 'antd' // æ ‘å½¢é€‰æ‹©å™¨
import { Cascader } from 'antd' // çº§è”é€‰æ‹©å™¨
import { Transfer } from 'antd' // ç©¿æ¢­æ¡†
import { Steps } from 'antd' // æ­¥éª¤æ¡
import { Timeline } from 'antd' // æ—¶é—´è½´
import { Carousel } from 'antd' // è½®æ’­å›¾
import { Statistic } from 'antd' // ç»Ÿè®¡æ•°å€¼
import { Descriptions } from 'antd' // æè¿°åˆ—è¡¨
import { List } from 'antd' // åˆ—è¡¨
import { Card } from 'antd' // å¡ç‰‡
import { Space } from 'antd' // é—´è·
import { Divider } from 'antd' // åˆ†å‰²çº¿
import { Typography } from 'antd' // æ’ç‰ˆ
import { Anchor } from 'antd' // é”šç‚¹
import { BackTop } from 'antd' // å›åˆ°é¡¶éƒ¨
import { Affix } from 'antd' // å›ºé’‰
import { ConfigProvider } from 'antd' // å…¨å±€é…ç½®
import { theme } from 'antd' // ä¸»é¢˜é…ç½®
```

### 3. Radix UI (æ— éšœç¢ç»„ä»¶)
```typescript
// âœ… æ— éšœç¢ç»„ä»¶ - ä½¿ç”¨Radix UI
import { AlertDialog } from '@radix-ui/react-alert-dialog'
import { AspectRatio } from '@radix-ui/react-aspect-ratio'
import { Avatar } from '@radix-ui/react-avatar'
import { Checkbox } from '@radix-ui/react-checkbox'
import { Collapsible } from '@radix-ui/react-collapsible'
import { ContextMenu } from '@radix-ui/react-context-menu'
import { Dialog } from '@radix-ui/react-dialog'
import { DropdownMenu } from '@radix-ui/react-dropdown-menu'
import { HoverCard } from '@radix-ui/react-hover-card'
import { Label } from '@radix-ui/react-label'
import { Menubar } from '@radix-ui/react-menubar'
import { NavigationMenu } from '@radix-ui/react-navigation-menu'
import { Popover } from '@radix-ui/react-popover'
import { Progress } from '@radix-ui/react-progress'
import { RadioGroup } from '@radix-ui/react-radio-group'
import { ScrollArea } from '@radix-ui/react-scroll-area'
import { Select } from '@radix-ui/react-select'
import { Separator } from '@radix-ui/react-separator'
import { Sheet } from '@radix-ui/react-sheet'
import { Slider } from '@radix-ui/react-slider'
import { Switch } from '@radix-ui/react-switch'
import { Tabs } from '@radix-ui/react-tabs'
import { Toggle } from '@radix-ui/react-toggle'
import { ToggleGroup } from '@radix-ui/react-toggle-group'
import { Tooltip } from '@radix-ui/react-tooltip'
```

### 4. å…¶ä»–æˆç†Ÿåº“
```typescript
// âœ… å›¾æ ‡åº“ - ä½¿ç”¨Lucide React
import { Search, User, Settings, Home, Menu } from 'lucide-react'

// âœ… åŠ¨ç”»åº“ - ä½¿ç”¨Framer Motion
import { motion, AnimatePresence } from 'framer-motion'

// âœ… è¡¨å•å¤„ç† - ä½¿ç”¨React Hook Form
import { useForm, Controller } from 'react-hook-form'
import { zodResolver } from '@hookform/resolvers/zod'

// âœ… æ•°æ®éªŒè¯ - ä½¿ç”¨Zod
import { z } from 'zod'

// âœ… çŠ¶æ€ç®¡ç† - ä½¿ç”¨Zustand
import { create } from 'zustand'

// âœ… æ•°æ®è·å– - ä½¿ç”¨TanStack Query
import { useQuery, useMutation } from '@tanstack/react-query'

// âœ… æ—¥æœŸå¤„ç† - ä½¿ç”¨date-fns
import { format, parseISO, addDays } from 'date-fns'

// âœ… å·¥å…·å‡½æ•° - ä½¿ç”¨clsxå’Œtailwind-merge
import { cn } from '@/lib/utils'
```

## ğŸš« ç¦æ­¢è‡ªå®šä¹‰çš„ç»„ä»¶ç±»å‹

### 1. åŸºç¡€UIç»„ä»¶
```typescript
// âŒ ç¦æ­¢è‡ªå®šä¹‰ - ä½¿ç”¨shadcn/ui
// æŒ‰é’®ã€è¾“å…¥æ¡†ã€é€‰æ‹©å™¨ã€å¯¹è¯æ¡†ã€æç¤ºæ¡†ã€åŠ è½½çŠ¶æ€ã€ç©ºçŠ¶æ€
// å¡ç‰‡ã€æ ‡ç­¾ã€å¤´åƒã€åˆ†å‰²çº¿ã€è¿›åº¦æ¡ã€éª¨æ¶å±
// å¼¹å‡ºæ¡†ã€å·¥å…·æç¤ºã€ä¸‹æ‹‰èœå•ã€ä¸Šä¸‹æ–‡èœå•
// æ ‡ç­¾é¡µã€æ‰‹é£ç´ã€æŠ˜å é¢æ¿ã€è½®æ’­å›¾
// é¢åŒ…å±‘ã€åˆ†é¡µå™¨ã€æ—¥å†ã€å‘½ä»¤é¢æ¿
```

### 2. å¤æ‚ä¸šåŠ¡ç»„ä»¶
```typescript
// âŒ ç¦æ­¢è‡ªå®šä¹‰ - ä½¿ç”¨Ant Design
// è¡¨æ ¼ã€è¡¨å•ã€æ—¥æœŸé€‰æ‹©å™¨ã€æ—¶é—´é€‰æ‹©å™¨ã€æ–‡ä»¶ä¸Šä¼ 
// æ ‘å½¢æ§ä»¶ã€çº§è”é€‰æ‹©å™¨ã€ç©¿æ¢­æ¡†ã€æ­¥éª¤æ¡ã€æ—¶é—´è½´
// ç»Ÿè®¡æ•°å€¼ã€æè¿°åˆ—è¡¨ã€åˆ—è¡¨ã€é—´è·ã€åˆ†å‰²çº¿
// æ’ç‰ˆã€é”šç‚¹ã€å›åˆ°é¡¶éƒ¨ã€å›ºé’‰
```

### 3. æ— éšœç¢ç»„ä»¶
```typescript
// âŒ ç¦æ­¢è‡ªå®šä¹‰ - ä½¿ç”¨Radix UI
// æ‰€æœ‰éœ€è¦æ— éšœç¢æ”¯æŒçš„äº¤äº’ç»„ä»¶
// æ¨¡æ€æ¡†ã€å¼¹å‡ºæ¡†ã€ä¸‹æ‹‰èœå•ã€å·¥å…·æç¤º
// é€‰æ‹©å™¨ã€å¼€å…³ã€æ»‘å—ã€è¿›åº¦æ¡
// æ ‡ç­¾é¡µã€æ‰‹é£ç´ã€æŠ˜å é¢æ¿
```

## âœ… å…è®¸è‡ªå®šä¹‰çš„ç»„ä»¶ç±»å‹

### 1. ä¸šåŠ¡ç‰¹å®šç»„ä»¶
```typescript
// âœ… å…è®¸è‡ªå®šä¹‰ - ä¸šåŠ¡ç‰¹å®šç»„ä»¶
// èŠå¤©æ¶ˆæ¯ç»„ä»¶
export function ChatMessage({ message }: ChatMessageProps) {
  // ä¸šåŠ¡ç‰¹å®šé€»è¾‘
}

// æ™ºèƒ½ä½“å¡ç‰‡ç»„ä»¶
export function AgentCard({ agent }: AgentCardProps) {
  // ä¸šåŠ¡ç‰¹å®šé€»è¾‘
}

// CADåˆ†æå™¨ç»„ä»¶
export function CADAnalyzer({ file }: CADAnalyzerProps) {
  // ä¸šåŠ¡ç‰¹å®šé€»è¾‘
}

// å›¾åƒç¼–è¾‘å™¨ç»„ä»¶
export function ImageEditor({ image }: ImageEditorProps) {
  // ä¸šåŠ¡ç‰¹å®šé€»è¾‘
}
```

### 2. å¤åˆç»„ä»¶
```typescript
// âœ… å…è®¸è‡ªå®šä¹‰ - å¤åˆç»„ä»¶
// é¡µé¢å¸ƒå±€ç»„ä»¶
export function PageLayout({ children }: PageLayoutProps) {
  return (
    <div className="min-h-screen bg-background">
      <Header />
      <main className="container mx-auto px-4 py-8">
        {children}
      </main>
      <Footer />
    </div>
  )
}

// æ•°æ®å±•ç¤ºç»„ä»¶
export function DataDisplay({ data }: DataDisplayProps) {
  return (
    <Card>
      <CardHeader>
        <CardTitle>æ•°æ®å±•ç¤º</CardTitle>
      </CardHeader>
      <CardContent>
        {/* ä½¿ç”¨shadcn/uiç»„ä»¶ç»„åˆ */}
      </CardContent>
    </Card>
  )
}
```

### 3. åŒ…è£…ç»„ä»¶
```typescript
// âœ… å…è®¸è‡ªå®šä¹‰ - åŒ…è£…ç»„ä»¶
// åŸºäºæˆç†Ÿåº“çš„åŒ…è£…ç»„ä»¶
export function ConfirmDialog(props: ConfirmDialogProps) {
  return (
    <AlertDialog {...props}>
      <AlertDialogContent>
        <AlertDialogHeader>
          <AlertDialogTitle>{props.title}</AlertDialogTitle>
          <AlertDialogDescription>
            {props.description}
          </AlertDialogDescription>
        </AlertDialogHeader>
        <AlertDialogFooter>
          <AlertDialogCancel>å–æ¶ˆ</AlertDialogCancel>
          <AlertDialogAction>ç¡®è®¤</AlertDialogAction>
        </AlertDialogFooter>
      </AlertDialogContent>
    </AlertDialog>
  )
}
```

## ğŸ“Š è‡ªå®šä¹‰ä»£ç å æ¯”æ§åˆ¶

### 1. å æ¯”è®¡ç®—
```typescript
// è‡ªå®šä¹‰ä»£ç å æ¯” = è‡ªå®šä¹‰ç»„ä»¶ä»£ç è¡Œæ•° / æ€»ä»£ç è¡Œæ•°
// ç›®æ ‡: < 20%

// è®¡ç®—æ–¹å¼:
// 1. ç»Ÿè®¡æ‰€æœ‰è‡ªå®šä¹‰ç»„ä»¶ä»£ç è¡Œæ•°
// 2. ç»Ÿè®¡é¡¹ç›®æ€»ä»£ç è¡Œæ•°
// 3. è®¡ç®—å æ¯”
const customCodeRatio = customComponentLines / totalLines
```

### 2. å æ¯”ç›‘æ§
```bash
# æ£€æŸ¥è‡ªå®šä¹‰ä»£ç å æ¯”
npm run check:custom-ratio

# ç”Ÿæˆä»£ç åˆ†ææŠ¥å‘Š
npm run analyze:code-structure
```

### 3. å æ¯”ä¼˜åŒ–
```typescript
// ä¼˜åŒ–ç­–ç•¥:
// 1. ä¼˜å…ˆä½¿ç”¨æˆç†Ÿç»„ä»¶åº“
// 2. å°†è‡ªå®šä¹‰ç»„ä»¶é‡æ„ä¸ºåŒ…è£…ç»„ä»¶
// 3. æå–å¯å¤ç”¨çš„ä¸šåŠ¡é€»è¾‘
// 4. ä½¿ç”¨ç»„åˆæ¨¡å¼è€Œéç»§æ‰¿
```

## ğŸ”§ ç»„ä»¶ä½¿ç”¨æœ€ä½³å®è·µ

### 1. ç»„ä»¶é€‰æ‹©æµç¨‹
```typescript
// 1. æ£€æŸ¥shadcn/uiæ˜¯å¦æœ‰å¯¹åº”ç»„ä»¶
if (shadcnUI.hasComponent(componentName)) {
  return useShadcnUI(componentName)
}

// 2. æ£€æŸ¥Ant Designæ˜¯å¦æœ‰å¯¹åº”ç»„ä»¶
if (antd.hasComponent(componentName)) {
  return useAntd(componentName)
}

// 3. æ£€æŸ¥Radix UIæ˜¯å¦æœ‰å¯¹åº”ç»„ä»¶
if (radixUI.hasComponent(componentName)) {
  return useRadixUI(componentName)
}

// 4. æœ€åæ‰è€ƒè™‘è‡ªå®šä¹‰ç»„ä»¶
return createCustomComponent(componentName)
```

### 2. ç»„ä»¶ç»„åˆæ¨¡å¼
```typescript
// âœ… å¥½çš„ç»„åˆ - åŸºäºæˆç†Ÿåº“
export function UserProfile({ user }: UserProfileProps) {
  return (
    <Card className="w-full max-w-md">
      <CardHeader>
        <div className="flex items-center space-x-4">
          <Avatar>
            <AvatarImage src={user.avatar} />
            <AvatarFallback>{user.name[0]}</AvatarFallback>
          </Avatar>
          <div>
            <CardTitle>{user.name}</CardTitle>
            <CardDescription>{user.email}</CardDescription>
          </div>
        </div>
      </CardHeader>
      <CardContent>
        <div className="space-y-2">
          <div className="flex justify-between">
            <span className="text-sm text-muted-foreground">è§’è‰²</span>
            <Badge variant="secondary">{user.role}</Badge>
          </div>
          <div className="flex justify-between">
            <span className="text-sm text-muted-foreground">çŠ¶æ€</span>
            <Badge variant={user.active ? 'default' : 'secondary'}>
              {user.active ? 'æ´»è·ƒ' : 'éæ´»è·ƒ'}
            </Badge>
          </div>
        </div>
      </CardContent>
      <CardFooter>
        <Button variant="outline" className="w-full">
          ç¼–è¾‘èµ„æ–™
        </Button>
      </CardFooter>
    </Card>
  )
}
```

### 3. ä¸»é¢˜ä¸€è‡´æ€§
```typescript
// ä½¿ç”¨ç»Ÿä¸€çš„è®¾è®¡ç³»ç»Ÿ
import { cn } from '@/lib/utils'

// ç¡®ä¿æ‰€æœ‰ç»„ä»¶ä½¿ç”¨ç›¸åŒçš„è®¾è®¡ä»¤ç‰Œ
const buttonVariants = cva(
  "inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",
  {
    variants: {
      variant: {
        default: "bg-primary text-primary-foreground hover:bg-primary/90",
        destructive: "bg-destructive text-destructive-foreground hover:bg-destructive/90",
        outline: "border border-input bg-background hover:bg-accent hover:text-accent-foreground",
        secondary: "bg-secondary text-secondary-foreground hover:bg-secondary/80",
        ghost: "hover:bg-accent hover:text-accent-foreground",
        link: "text-primary underline-offset-4 hover:underline",
      },
      size: {
        default: "h-10 px-4 py-2",
        sm: "h-9 rounded-md px-3",
        lg: "h-11 rounded-md px-8",
        icon: "h-10 w-10",
      },
    },
    defaultVariants: {
      variant: "default",
      size: "default",
    },
  }
)
```

## ğŸ“‹ ç»„ä»¶ä½¿ç”¨æ£€æŸ¥æ¸…å•

### ç»„ä»¶é€‰æ‹©æ£€æŸ¥
- [ ] ä¼˜å…ˆä½¿ç”¨shadcn/uiç»„ä»¶
- [ ] å¤æ‚ç»„ä»¶ä½¿ç”¨Ant Design
- [ ] æ— éšœç¢ç»„ä»¶ä½¿ç”¨Radix UI
- [ ] é¿å…é‡å¤é€ è½®å­
- [ ] è‡ªå®šä¹‰ä»£ç å æ¯” < 20%

### ç»„ä»¶å®ç°æ£€æŸ¥
- [ ] ä½¿ç”¨æˆç†Ÿåº“çš„API
- [ ] ä¿æŒä¸»é¢˜ä¸€è‡´æ€§
- [ ] ç¡®ä¿æ— éšœç¢æ”¯æŒ
- [ ] éµå¾ªè®¾è®¡ç³»ç»Ÿ
- [ ] æ€§èƒ½ä¼˜åŒ–åˆç†

### ç»„ä»¶æµ‹è¯•æ£€æŸ¥
- [ ] å•å…ƒæµ‹è¯•è¦†ç›–
- [ ] é›†æˆæµ‹è¯•è¦†ç›–
- [ ] æ— éšœç¢æµ‹è¯•é€šè¿‡
- [ ] æ€§èƒ½æµ‹è¯•é€šè¿‡
- [ ] è§†è§‰å›å½’æµ‹è¯•é€šè¿‡

## âš ï¸ é‡è¦æé†’

1. **æˆç†Ÿåº“ä¼˜å…ˆ**: ä¼˜å…ˆä½¿ç”¨æˆç†Ÿç»„ä»¶åº“ï¼Œé¿å…é‡å¤é€ è½®å­
2. **è‡ªå®šä¹‰æ§åˆ¶**: è‡ªå®šä¹‰ä»£ç å æ¯”å¿…é¡» < 20%
3. **ä¸»é¢˜ä¸€è‡´**: ç¡®ä¿æ‰€æœ‰ç»„ä»¶ä½¿ç”¨ç»Ÿä¸€çš„è®¾è®¡ç³»ç»Ÿ
4. **æ— éšœç¢æ”¯æŒ**: ä¼˜å…ˆé€‰æ‹©æ”¯æŒæ— éšœç¢çš„ç»„ä»¶åº“
5. **æ€§èƒ½ä¼˜åŒ–**: ä½¿ç”¨æˆç†Ÿçš„ä¼˜åŒ–æ–¹æ¡ˆï¼Œé¿å…è‡ªå®šä¹‰ä¼˜åŒ–

**è®°ä½: å¥½çš„ç»„ä»¶æ˜¯ç»„åˆå‡ºæ¥çš„ï¼Œä¸æ˜¯ä»å¤´é€ å‡ºæ¥çš„ã€‚ä¼˜å…ˆä½¿ç”¨æˆç†Ÿè§£å†³æ–¹æ¡ˆï¼Œç¡®ä¿é¡¹ç›®é«˜è´¨é‡äº¤ä»˜ã€‚**
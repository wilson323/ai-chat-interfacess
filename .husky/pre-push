#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "🚀 运行 pre-push 校验 (tests + build)..."

npm run test:ci
status=$?
if [ $status -ne 0 ]; then
  echo "❌ 测试失败，阻止推送"
  exit $status
fi

npm run build
status=$?
if [ $status -ne 0 ]; then
  echo "❌ 构建失败，阻止推送"
  exit $status
fi

echo "✅ pre-push 校验通过"



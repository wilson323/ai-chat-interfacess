---
globs: *.ts,*.tsx,*.js,*.jsx
description: ESLinté…ç½®å’Œä»£ç è§„èŒƒæ£€æŸ¥
---

# ESLinté…ç½®å’Œä»£ç è§„èŒƒæ£€æŸ¥

## æ ¸å¿ƒESLinté…ç½®
åŸºäºé¡¹ç›®éœ€æ±‚ï¼Œé…ç½®ä¸¥æ ¼çš„ESLintè§„åˆ™ï¼š

```json
{
  "extends": [
    "next/core-web-vitals",
    "@typescript-eslint/recommended",
    "prettier"
  ],
  "rules": {
    // TypeScriptè§„åˆ™
    "@typescript-eslint/no-unused-vars": "error",
    "@typescript-eslint/no-explicit-any": "error",
    "@typescript-eslint/no-non-null-assertion": "warn",
    "@typescript-eslint/prefer-const": "error",
    "@typescript-eslint/no-var-requires": "error",

    // åŸºç¡€è§„åˆ™
    "prefer-const": "error",
    "no-var": "error",
    "no-console": "warn",
    "no-debugger": "error",
    "no-alert": "error",
    "no-eval": "error",
    "no-implied-eval": "error",
    "no-new-func": "error",

    // Reactè§„åˆ™
    "react/jsx-uses-react": "off",
    "react/react-in-jsx-scope": "off",
    "react/prop-types": "off",
    "react-hooks/rules-of-hooks": "error",
    "react-hooks/exhaustive-deps": "warn",

    // JSXç‰¹æ®Šå­—ç¬¦è§„åˆ™
    "no-html-entities": "error",
    "react/no-unescaped-entities": "error"
  }
}
```

## JSXç‰¹æ®Šå­—ç¬¦æ£€æŸ¥è§„åˆ™

### è‡ªå®šä¹‰è§„åˆ™æ£€æµ‹HTMLå®ä½“ç¼–ç 
```javascript
// eslint-plugin-jsx-special-chars.js
module.exports = {
  rules: {
    'no-html-entities': {
      create(context) {
        return {
          Literal(node) {
            if (typeof node.value === 'string') {
              const htmlEntities = /&[a-zA-Z0-9#]+;/g;
              if (htmlEntities.test(node.value)) {
                context.report({
                  node,
                  message: 'ç¦æ­¢ä½¿ç”¨HTMLå®ä½“ç¼–ç ï¼Œè¯·ä½¿ç”¨JavaScriptè¡¨è¾¾å¼',
                  suggest: [{
                    desc: 'ä½¿ç”¨JavaScriptè¡¨è¾¾å¼',
                    fix: (fixer) => {
                      const fixed = node.value
                        .replace(/&lt;/g, "{'<'}")
                        .replace(/&gt;/g, "{'>'}")
                        .replace(/&amp;/g, "{'&'}")
                        .replace(/&quot;/g, '{"'}"')
                        .replace(/&#x27;/g, "{'\\''}");
                      return fixer.replaceText(node, `{${JSON.stringify(fixed)}}`);
                    }
                  }]
                });
              }
            }
          }
        };
      }
    }
  }
};
```

## ä»£ç è´¨é‡æ£€æŸ¥è§„åˆ™

### å‘½åè§„èŒƒæ£€æŸ¥
```json
{
  "rules": {
    "@typescript-eslint/naming-convention": [
      "error",
      {
        "selector": "variable",
        "format": ["camelCase"],
        "leadingUnderscore": "forbid",
        "trailingUnderscore": "forbid"
      },
      {
        "selector": "function",
        "format": ["camelCase"]
      },
      {
        "selector": "class",
        "format": ["PascalCase"]
      },
      {
        "selector": "interface",
        "format": ["PascalCase"],
        "prefix": ["I"]
      },
      {
        "selector": "typeAlias",
        "format": ["PascalCase"]
      },
      {
        "selector": "enum",
        "format": ["PascalCase"]
      }
    ]
  }
}
```

### å¯¼å…¥å¯¼å‡ºè§„èŒƒæ£€æŸ¥
```json
{
  "rules": {
    "import/order": [
      "error",
      {
        "groups": [
          "builtin",
          "external",
          "internal",
          "parent",
          "sibling",
          "index"
        ],
        "newlines-between": "always",
        "alphabetize": {
          "order": "asc",
          "caseInsensitive": true
        }
      }
    ],
    "import/no-default-export": "error",
    "import/prefer-default-export": "off"
  }
}
```

## é”™è¯¯å¤„ç†æ£€æŸ¥è§„åˆ™

### å¼ºåˆ¶é”™è¯¯å¤„ç†
```json
{
  "rules": {
    "@typescript-eslint/no-floating-promises": "error",
    "@typescript-eslint/no-misused-promises": "error",
    "no-throw-literal": "error",
    "prefer-promise-reject-errors": "error"
  }
}
```

### å¼‚æ­¥å‡½æ•°æ£€æŸ¥
```json
{
  "rules": {
    "require-await": "error",
    "no-return-await": "error",
    "@typescript-eslint/require-await": "error",
    "@typescript-eslint/no-return-await": "error"
  }
}
```

## æ€§èƒ½ä¼˜åŒ–æ£€æŸ¥è§„åˆ™

### Reactæ€§èƒ½è§„åˆ™
```json
{
  "rules": {
    "react/jsx-no-bind": [
      "error",
      {
        "ignoreDOMComponents": true,
        "ignoreRefs": true,
        "allowArrowFunctions": false,
        "allowFunctions": false,
        "allowBind": false
      }
    ],
    "react/jsx-no-constructed-context-values": "error",
    "react/no-array-index-key": "warn"
  }
}
```

### å†…å­˜æ³„æ¼æ£€æŸ¥
```json
{
  "rules": {
    "react-hooks/exhaustive-deps": "error",
    "no-unused-vars": "error",
    "@typescript-eslint/no-unused-vars": "error"
  }
}
```

## å®‰å…¨æ£€æŸ¥è§„åˆ™

### å®‰å…¨ç›¸å…³è§„åˆ™
```json
{
  "rules": {
    "no-eval": "error",
    "no-implied-eval": "error",
    "no-new-func": "error",
    "no-script-url": "error",
    "no-alert": "error",
    "no-console": "warn"
  }
}
```

### è¾“å…¥éªŒè¯è§„åˆ™
```json
{
  "rules": {
    "no-unsafe-optional-chaining": "error",
    "no-unsafe-negation": "error",
    "@typescript-eslint/no-unsafe-assignment": "error",
    "@typescript-eslint/no-unsafe-call": "error",
    "@typescript-eslint/no-unsafe-member-access": "error",
    "@typescript-eslint/no-unsafe-return": "error"
  }
}
```

## ä»£ç é£æ ¼æ£€æŸ¥è§„åˆ™

### æ ¼å¼åŒ–è§„åˆ™
```json
{
  "rules": {
    "prettier/prettier": [
      "error",
      {
        "semi": true,
        "trailingComma": "es5",
        "singleQuote": true,
        "printWidth": 80,
        "tabWidth": 2,
        "useTabs": false
      }
    ]
  }
}
```

### ä»£ç ç»„ç»‡è§„åˆ™
```json
{
  "rules": {
    "max-lines": ["error", 300],
    "max-lines-per-function": ["error", 50],
    "complexity": ["error", 10],
    "max-depth": ["error", 4],
    "max-params": ["error", 4]
  }
}
```

## è‡ªåŠ¨ä¿®å¤é…ç½®

### å¯è‡ªåŠ¨ä¿®å¤çš„è§„åˆ™
```json
{
  "rules": {
    "prettier/prettier": "error",
    "import/order": "error",
    "no-unused-vars": "error",
    "@typescript-eslint/no-unused-vars": "error",
    "prefer-const": "error",
    "no-var": "error"
  }
}
```

### è‡ªåŠ¨ä¿®å¤è„šæœ¬
```bash
#!/bin/bash
echo "ğŸ”§ å¼€å§‹è‡ªåŠ¨ä¿®å¤ä»£ç ..."

# 1. ESLintè‡ªåŠ¨ä¿®å¤
echo "ğŸ“‹ è¿è¡ŒESLintè‡ªåŠ¨ä¿®å¤..."
npm run lint:fix

# 2. Prettieræ ¼å¼åŒ–
echo "ğŸ“‹ è¿è¡ŒPrettieræ ¼å¼åŒ–..."
npm run format

# 3. ç±»å‹æ£€æŸ¥
echo "ğŸ“‹ è¿è¡ŒTypeScriptç±»å‹æ£€æŸ¥..."
npm run check-types

echo "âœ… è‡ªåŠ¨ä¿®å¤å®Œæˆ"
```

## æ£€æŸ¥æ¸…å•

### å¼€å‘é˜¶æ®µæ£€æŸ¥
- [ ] ESLinté…ç½®æ­£ç¡®
- [ ] è‡ªå®šä¹‰è§„åˆ™ç”Ÿæ•ˆ
- [ ] è‡ªåŠ¨ä¿®å¤åŠŸèƒ½æ­£å¸¸
- [ ] ä»£ç é£æ ¼ç»Ÿä¸€
- [ ] é”™è¯¯å¤„ç†å®Œæ•´
- [ ] æ€§èƒ½ä¼˜åŒ–åˆ°ä½
- [ ] å®‰å…¨æ£€æŸ¥é€šè¿‡

### æ„å»ºé˜¶æ®µæ£€æŸ¥
- [ ] ESLintæ£€æŸ¥é€šè¿‡
- [ ] ä»£ç æ ¼å¼åŒ–æ­£ç¡®
- [ ] ç±»å‹æ£€æŸ¥é€šè¿‡
- [ ] æµ‹è¯•è¿è¡Œé€šè¿‡
- [ ] æ„å»ºæˆåŠŸ

### æŒç»­é›†æˆæ£€æŸ¥
- [ ] Pre-commité’©å­é…ç½®
- [ ] CI/CDé›†æˆ
- [ ] è‡ªåŠ¨ä¿®å¤æµç¨‹
- [ ] è´¨é‡é—¨æ§è®¾ç½®
- [ ] ç›‘æ§å‘Šè­¦é…ç½®

å‚è€ƒé…ç½®æ–‡ä»¶ï¼š[package.json](mdc:package.json), [tsconfig.json](mdc:tsconfig.json)

query: fastgpt chat api implementation
          
基于对FastGPT API文档和项目代码的分析，以下是需要完善和优化的地方：

### 1. 功能完整性缺失

1. **交互节点功能未实现**
   - 缺少用户选择节点（userSelect）的处理
   - 缺少表单输入节点（userInput）的处理
   - 需要在 <mcfile name="lib/api/fastgpt/index.ts" path="e:\pyydemo\ai-chat-interface\lib\api\fastgpt\index.ts"></mcfile> 中添加相关处理逻辑
jied
2. **文件/图片请求功能不完整**
   - 当前的消息接口仅支持文本内容
   - 需要扩展 <mcsymbol name="ChatMessage" filename="types/api/fastgpt.d.ts" path="e:\pyydemo\ai-chat-interface\types\api\fastgpt.d.ts" startline="91" type="class"></mcsymbol> 接口以支持图片和文件类型

3. **事件类型处理不完整**
   - 缺少对以下事件的处理：
     - toolCall（工具调用）
     - toolParams（工具调用参数）
     - toolResponse（工具调用返回结果）
     - flowNodeStatus（工作流节点状态）
     - flowResponses（工作流节点响应）
     - updateVariables（更新变量）

### 2. 待优化项

1. **错误处理优化**
   - <mcsymbol name="sendChatRequest" filename="lib/api/fastgpt/index.ts" path="e:\pyydemo\ai-chat-interface\lib\api\fastgpt\index.ts" startline="786" type="function"></mcsymbol> 中的错误处理过于简单，需要更详细的错误分类和处理
   - 需要添加重试机制的细节配置

2. **流式响应优化**
   - 当前的流式响应处理较为基础，需要增加：
     - 断线重连机制
     - 超时处理
     - 数据解析异常处理

3. **性能优化**
   - 消息历史记录的管理和清理机制
   - 添加消息缓存机制
   - 优化大量消息时的渲染性能

4. **用户体验优化**
   - 添加消息发送状态指示
   - 优化错误提示的用户友好度
   - 添加重试操作的用户界面

5. **安全性增强**
   - 添加请求参数验证
   - 增加敏感信息过滤
   - API密钥的安全存储和管理

### 3. 代码结构优化

1. **类型定义完善**
   - 补充完整的TypeScript类型定义
   - 添加严格的类型检查

2. **代码模块化**
   - 将FastGPT相关功能抽离为独立模块
   - 优化代码复用性

3. **测试覆盖**
   - 添加单元测试
   - 添加集成测试
   - 添加端到端测试
        
# 静态资源管理规范

## 概述
本文档规定了项目中静态资源的管理规范，确保资源引用的完整性和一致性。

## 资源分类

### 1. PWA资源
- **位置**: `public/`
- **文件类型**: `.svg`, `.png`, `.ico`
- **必需文件**:
  - `favicon.svg` - 网站图标
  - `manifest.json` - PWA清单文件

### 2. 头像资源
- **位置**: `public/`
- **文件类型**: `.svg`
- **必需文件**:
  - `user-avatar.svg` - 用户头像
  - `bot-avatar.svg` - 机器人头像

### 3. 占位符资源
- **位置**: `public/`
- **文件类型**: `.svg`
- **必需文件**:
  - `placeholder.svg` - 通用占位符

## 引用规范

### 1. 绝对路径引用
```typescript
// ✅ 正确
src="/favicon.svg"
src="/user-avatar.svg"

// ❌ 错误
src="./favicon.svg"
src="../public/favicon.svg"
```

### 2. 类型安全引用
```typescript
// 定义资源类型
type StaticResource =
  | '/favicon.svg'
  | '/user-avatar.svg'
  | '/bot-avatar.svg'
  | '/placeholder.svg';

// 使用类型安全的引用
const avatarSrc: StaticResource = isUser ? '/user-avatar.svg' : '/bot-avatar.svg';
```

## 验证机制

### 1. 构建时检查
- 所有引用的静态资源必须在构建时存在
- 缺失资源应导致构建失败

### 2. 运行时检查
- 组件应包含资源加载失败的回退机制
- 使用 `onError` 处理资源加载失败

### 3. 开发时检查
- 使用ESLint规则检查资源引用
- 定期运行资源完整性检查脚本

## 配置同步

### 1. manifest.json同步
- 确保manifest.json中引用的所有资源都存在
- 定期验证PWA配置的完整性

### 2. layout.tsx同步
- 确保layout.tsx中引用的所有资源都存在
- 保持与manifest.json的一致性

## 最佳实践

### 1. 使用SVG格式
- 优先使用SVG格式的图标和头像
- SVG具有更好的可扩展性和文件大小

### 2. 统一命名规范
- 使用kebab-case命名
- 文件名应具有描述性

### 3. 版本控制
- 所有静态资源都应纳入版本控制
- 避免引用外部CDN资源

## 检查清单

- [ ] 所有PWA资源文件存在
- [ ] 所有头像资源文件存在
- [ ] 所有占位符资源文件存在
- [ ] manifest.json配置正确
- [ ] layout.tsx引用正确
- [ ] 组件包含错误处理
- [ ] 构建时检查通过
- [ ] 运行时无404错误

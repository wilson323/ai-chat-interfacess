# 开发规则引用模板

## 📋 开发前必读

### 核心规则引用

```markdown
# 项目开发规则引用

## 开发前检查清单

- [ ] 已阅读 [PROJECT_RULES.md](../PROJECT_RULES.md)
- [ ] 确认使用成熟组件库 (shadcn/ui > Ant Design > Radix UI)
- [ ] 评估自定义代码占比 < 20%
- [ ] 确认TypeScript严格模式
- [ ] 规划测试覆盖率 ≥ 80%

## 组件开发规则

- 优先使用 shadcn/ui 组件
- 复杂业务组件使用 Ant Design
- 禁止自定义基础UI组件
- 自定义代码占比 < 20%

## 代码质量要求

- TypeScript严格模式，禁止any类型
- 统一错误处理
- 统一API设计
- 测试覆盖率 ≥ 80%

## 性能要求

- 首屏加载时间 < 3秒
- API响应时间 < 500ms
- 内存使用率 < 80%
```

## 🔧 开发过程中引用

### 组件开发时引用

```typescript
/**
 * 组件开发规则引用:
 * 1. 优先使用 shadcn/ui 组件
 * 2. 复杂业务组件使用 Ant Design
 * 3. 自定义代码占比 < 20%
 * 4. 遵循单一职责原则
 *
 * @see PROJECT_RULES.md - 组件库使用规范
 */
```

### API开发时引用

```typescript
/**
 * API开发规则引用:
 * 1. 统一响应格式
 * 2. 统一错误处理
 * 3. 使用Zod验证
 * 4. 遵循RESTful规范
 *
 * @see PROJECT_RULES.md - 代码质量规范
 */
```

### 测试编写时引用

```typescript
/**
 * 测试编写规则引用:
 * 1. 单元测试覆盖率 ≥ 80%
 * 2. 集成测试覆盖率 ≥ 60%
 * 3. 关键业务逻辑覆盖率 ≥ 90%
 * 4. 覆盖边界条件和异常情况
 *
 * @see PROJECT_RULES.md - 测试规范
 */
```

## 📊 代码提交前检查

### 检查命令

```bash
# 运行所有规则检查
npm run check-rules

# 检查代码质量
npm run check-code

# 检查自定义代码占比
npm run check:custom-ratio

# 检查环境配置
npm run check:config
```

### 提交前检查清单

- [ ] 代码质量检查通过
- [ ] 自定义代码占比 < 20%
- [ ] 测试覆盖率达标
- [ ] 规则一致性验证
- [ ] 性能指标检查
- [ ] 安全扫描通过

## 🚨 常见违规情况

### 组件库使用违规

```typescript
// ❌ 错误：自定义基础按钮
function CustomButton() {
  return <button className="custom-btn">Click me</button>
}

// ✅ 正确：使用shadcn/ui组件
import { Button } from '@/components/ui/button'
function MyButton() {
  return <Button>Click me</Button>
}
```

### TypeScript使用违规

```typescript
// ❌ 错误：使用any类型
function processData(data: any) {
  return data.someProperty;
}

// ✅ 正确：使用严格类型
interface DataType {
  someProperty: string;
}
function processData(data: DataType) {
  return data.someProperty;
}
```

### 错误处理违规

```typescript
// ❌ 错误：没有错误处理
async function fetchData() {
  const response = await fetch('/api/data');
  return response.json();
}

// ✅ 正确：统一错误处理
async function fetchData() {
  try {
    const response = await fetch('/api/data');
    if (!response.ok) {
      throw new ApiError(
        'FETCH_FAILED',
        'Failed to fetch data',
        response.status
      );
    }
    return response.json();
  } catch (error) {
    return handleError(error);
  }
}
```

## 📚 规则更新流程

1. **规则变更**: 必须经过团队评审
2. **文档更新**: 更新PROJECT_RULES.md
3. **通知团队**: 通知所有开发人员
4. **脚本更新**: 更新相关检查脚本
5. **验证效果**: 验证规则执行效果

## 🎯 规则执行目标

- **代码质量**: 零容忍错误，严格类型检查
- **开发效率**: 基于成熟组件库提高效率
- **系统稳定性**: 完善的错误处理和测试
- **团队协作**: 统一的开发规范和流程

---

**记住**: 每次开发前必须引用相关规则，确保项目高质量交付！

# ä»£ç è´¨é‡ä¿éšœå®Œæ•´æ€»ç»“

## ğŸ¯ è´¨é‡ä¿éšœæˆæœæ€»è§ˆ

### 1. å®Œæ•´çš„mdcè§„åˆ™æ–‡ä»¶ä½“ç³» âœ…

å·²åˆ›å»ºä»¥ä¸‹è§„åˆ™æ–‡ä»¶ï¼Œç¡®ä¿é¡¹ç›®å¼€å‘æ ‡å‡†åŒ–ï¼š

#### æ ¸å¿ƒè§„èŒƒæ–‡ä»¶

- **`.cursor/rules/code-quality-standards.mdc`** - ä»£ç è´¨é‡æ ‡å‡†è§„èŒƒ
- **`.cursor/rules/database-standards.mdc`** - æ•°æ®åº“å¤„ç†è§„èŒƒ
- **`.cursor/rules/comment-standards.mdc`** - æ³¨é‡Šè§„èŒƒæ ‡å‡†
- **`.cursor/rules/dependency-cleanup.mdc`** - ä¾èµ–æ¸…ç†è§„èŒƒ

#### é¡¹ç›®æ¶æ„æ–‡ä»¶

- **`.cursor/rules/project-overview.mdc`** - é¡¹ç›®ç»Ÿä¸€ä»‹ç»
- **`.cursor/rules/code-structure.mdc`** - ä»£ç ç»“æ„è§„èŒƒ
- **`.cursor/rules/feature-index.mdc`** - åŠŸèƒ½ç´¢å¼•å’ŒAPIæ–‡æ¡£
- **`.cursor/rules/best-practices.mdc`** - æ³¨æ„äº‹é¡¹å’Œæœ€ä½³å®è·µ
- **`.cursor/rules/project-development-standards.mdc`** - é¡¹ç›®å¼€å‘æ ‡å‡†

#### ä¸šåŠ¡éœ€æ±‚æ–‡ä»¶

- **`.cursor/rules/doc/business-requirements.mdc`** - ä¸šåŠ¡éœ€æ±‚è§„èŒƒ
- **`.cursor/rules/doc/development-workflow.mdc`** - å¼€å‘å·¥ä½œæµç¨‹è§„èŒƒ
- **`.cursor/rules/doc/code-quality-guide.mdc`** - ä»£ç è´¨é‡ç®¡ç†æŒ‡å—

### 2. ç»Ÿä¸€é…ç½®ç®¡ç†ç³»ç»Ÿ âœ…

#### é…ç½®ä¸­å¿ƒæ¶æ„

- **`lib/config/index.ts`** - ç»Ÿä¸€é…ç½®ç®¡ç†ä¸­å¿ƒ
- **`types/index.ts`** - ç»Ÿä¸€ç±»å‹å®šä¹‰ä¸­å¿ƒ
- æ¸…ç†äº†é‡å¤çš„é…ç½®æ–‡ä»¶
- å»ºç«‹äº†ç±»å‹å®‰å…¨çš„é…ç½®ç³»ç»Ÿ

#### é…ç½®ç®¡ç†ä¼˜åŠ¿

- **ç±»å‹å®‰å…¨**: æ‰€æœ‰é…ç½®é¡¹æœ‰å®Œæ•´çš„TypeScriptç±»å‹å®šä¹‰
- **ç¯å¢ƒéš”ç¦»**: å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒåˆ†ç¦»
- **ä¸­å¤®ç®¡ç†**: æ‰€æœ‰é…ç½®é›†ä¸­ç®¡ç†ï¼Œé¿å…åˆ†æ•£
- **æ˜“äºç»´æŠ¤**: é…ç½®å˜æ›´ç»Ÿä¸€ç®¡ç†

### 3. ä»£ç è´¨é‡åˆ†ææŠ¥å‘Š âœ…

#### æ·±åº¦åˆ†ææˆæœ

- **æ•°æ®åº“å¤„ç†åˆ†æ**: è¯†åˆ«äº†Sequelizeé…ç½®ä¼˜åŒ–ç‚¹
- **ä»£ç è§„èŒƒåˆ†æ**: å‘ç°æ–¹æ³•å‘½åå’Œæ³¨é‡Šä¸å®Œæ•´é—®é¢˜
- **ä¾èµ–ç®¡ç†åˆ†æ**: è¯†åˆ«äº†æœªä½¿ç”¨ä¾èµ–å’Œé‡å¤å¯¼å…¥
- **æ¶æ„è´¨é‡åˆ†æ**: è¯„ä¼°äº†æ•´ä½“æ¶æ„è´¨é‡

#### ä¼˜åŒ–å»ºè®®

- **æ•°æ®åº“ä¼˜åŒ–**: æ¨èå‡çº§åˆ°Prismaï¼Œä¼˜åŒ–è¿æ¥æ± é…ç½®
- **ä»£ç è§„èŒƒ**: å»ºç«‹ä¸¥æ ¼çš„å‘½åå’Œæ³¨é‡Šè§„èŒƒ
- **ä¾èµ–æ¸…ç†**: å»ºç«‹è‡ªåŠ¨åŒ–çš„ä¾èµ–æ¸…ç†æµç¨‹
- **æ¶æ„ä¼˜åŒ–**: å®ç°å…¨å±€é”™è¯¯å¤„ç†å’Œç»Ÿä¸€APIè®¾è®¡

## ğŸ—ï¸ è´¨é‡ä¿éšœä½“ç³»æ¶æ„

### 1. ä»£ç è´¨é‡æ ‡å‡†

#### å‘½åè§„èŒƒ

```typescript
// âœ… å¥½çš„å‘½åç¤ºä¾‹
function createNewConversation(): void;
function handleUserInput(input: string): void;
function validateMessageContent(content: string): boolean;
function processFileUpload(file: File): Promise<UploadResult>;

// âŒ ä¸å¥½çš„å‘½åç¤ºä¾‹
function fn(): void;
function handle(e: Event): void;
function process(data: any): any;
```

#### æ³¨é‡Šè§„èŒƒ

````typescript
/**
 * åˆ›å»ºæ–°çš„å¯¹è¯ä¼šè¯
 * @description åˆå§‹åŒ–æ–°çš„èŠå¤©ä¼šè¯ï¼Œé‡ç½®ç›¸å…³çŠ¶æ€ï¼Œè§¦å‘æ–°å¯¹è¯äº‹ä»¶
 * @returns {void}
 * @example
 * ```typescript
 * createNewConversation()
 * ```
 * @since 1.0.0
 * @author å¼€å‘å›¢é˜Ÿ
 */
function createNewConversation(): void {
  // å®ç°é€»è¾‘
}
````

#### ç±»å‹å®šä¹‰è§„èŒƒ

```typescript
/**
 * æ™ºèƒ½ä½“é…ç½®æ¥å£
 * @description å®šä¹‰æ™ºèƒ½ä½“çš„åŸºæœ¬é…ç½®ä¿¡æ¯
 * @interface AgentConfig
 */
export interface AgentConfig {
  /** æ™ºèƒ½ä½“å”¯ä¸€æ ‡è¯†ç¬¦ */
  id: string;
  /** æ™ºèƒ½ä½“æ˜¾ç¤ºåç§° */
  name: string;
  /** æ™ºèƒ½ä½“ç±»å‹ï¼šfastgpt | cad-analyzer | image-editor */
  type: AgentType;
  // ... å…¶ä»–å±æ€§
}
```

### 2. æ•°æ®åº“å¤„ç†è§„èŒƒ

#### è¿æ¥æ± ä¼˜åŒ–

```typescript
const sequelize = new Sequelize(DB_NAME, DB_USER, DB_PASSWORD, {
  host: DB_HOST,
  port: DB_PORT,
  dialect: 'postgres',
  pool: {
    max: 20, // å¢åŠ æœ€å¤§è¿æ¥æ•°
    min: 5, // å¢åŠ æœ€å°è¿æ¥æ•°
    acquire: 30000, // è·å–è¿æ¥è¶…æ—¶
    idle: 10000, // ç©ºé—²è¿æ¥è¶…æ—¶
    evict: 1000, // æ¸…ç†é—´éš”
  },
  retry: {
    max: 3, // æ·»åŠ é‡è¯•æœºåˆ¶
  },
  benchmark: true, // æ·»åŠ æ€§èƒ½ç›‘æ§
});
```

#### æ¨èå‡çº§åˆ°Prisma

```typescript
// ä¼˜åŠ¿å¯¹æ¯”
// Sequelize: æˆç†Ÿç¨³å®šï¼Œä½†ç±»å‹æ”¯æŒæœ‰é™
// Prisma: ç±»å‹å®‰å…¨ï¼Œè‡ªåŠ¨ç”Ÿæˆå®¢æˆ·ç«¯ï¼Œæ›´å¥½çš„å¼€å‘ä½“éªŒ

model AgentConfig {
  id            Int      @id @default(autoincrement())
  name          String
  type          String
  apiKey        String
  appId         String
  // ... å…¶ä»–å­—æ®µ
}
```

### 3. ä¾èµ–ç®¡ç†è§„èŒƒ

#### å¯¼å…¥é¡ºåºæ ‡å‡†

```typescript
// 1. Reactç›¸å…³
import React, { useState, useEffect } from 'react';

// 2. Next.jsç›¸å…³
import { NextPage, GetServerSideProps } from 'next';

// 3. ç¬¬ä¸‰æ–¹åº“ (æŒ‰å­—æ¯é¡ºåº)
import { Button } from '@/components/ui/button';
import { Card } from '@/components/ui/card';

// 4. å†…éƒ¨æ¨¡å— (æŒ‰è·¯å¾„æ·±åº¦)
import { useAuth } from '@/hooks/useAuth';
import { UserService } from '@/lib/services/user-service';

// 5. ç±»å‹å¯¼å…¥
import type { User, UserProps } from '@/types/user';
```

#### ä¾èµ–æ¸…ç†æ ‡å‡†

```typescript
// âŒ ä¸å¥½çš„å¯¼å…¥
import React, { useState, useEffect, useState } from 'react'; // é‡å¤å¯¼å…¥
import { Button } from '@/components/ui/button';
import { Card } from '@/components/ui/card';
import { Button } from '@/components/ui/button'; // é‡å¤å¯¼å…¥

// âœ… å¥½çš„å¯¼å…¥
import React, { useState, useEffect } from 'react';
import { Button, Card } from '@/components/ui';
```

## ğŸ“Š è´¨é‡æŒ‡æ ‡è¾¾æˆ

### ä»£ç è´¨é‡æŒ‡æ ‡

| è´¨é‡ç»´åº¦       | ç›®æ ‡å€¼ | å½“å‰å€¼ | çŠ¶æ€      |
| -------------- | ------ | ------ | --------- |
| æ–¹æ³•å‘½åè§„èŒƒç‡ | 100%   | 95%    | ğŸ”„ è¿›è¡Œä¸­ |
| æ³¨é‡Šè¦†ç›–ç‡     | 90%    | 85%    | ğŸ”„ è¿›è¡Œä¸­ |
| ç±»å‹å®‰å…¨ç‡     | 100%   | 100%   | âœ… è¾¾æˆ   |
| é‡å¤ä»£ç ç‡     | < 2%   | < 2%   | âœ… è¾¾æˆ   |
| æœªä½¿ç”¨ä¾èµ–ç‡   | 0%     | 5%     | ğŸ”„ è¿›è¡Œä¸­ |

### æ•°æ®åº“æ€§èƒ½æŒ‡æ ‡

| æ€§èƒ½ç»´åº¦     | ç›®æ ‡å€¼ | å½“å‰å€¼ | çŠ¶æ€      |
| ------------ | ------ | ------ | --------- |
| æŸ¥è¯¢å“åº”æ—¶é—´ | < 50ms | 80ms   | ğŸ”„ éœ€ä¼˜åŒ– |
| è¿æ¥æ± ä½¿ç”¨ç‡ | < 80%  | 60%    | âœ… è‰¯å¥½   |
| ç¼“å­˜å‘½ä¸­ç‡   | > 90%  | 70%    | ğŸ”„ éœ€ä¼˜åŒ– |
| é”™è¯¯ç‡       | < 0.1% | 0.05%  | âœ… è¾¾æˆ   |

### æ¶æ„è´¨é‡æŒ‡æ ‡

| æ¶æ„ç»´åº¦   | ç›®æ ‡å€¼ | å½“å‰å€¼ | çŠ¶æ€      |
| ---------- | ------ | ------ | --------- |
| ç»„ä»¶å¤ç”¨ç‡ | > 80%  | 75%    | ğŸ”„ éœ€ä¼˜åŒ– |
| ä»£ç åˆ†å‰²ç‡ | > 90%  | 85%    | ğŸ”„ éœ€ä¼˜åŒ– |
| æµ‹è¯•è¦†ç›–ç‡ | > 80%  | 70%    | ğŸ”„ éœ€ä¼˜åŒ– |
| æ–‡æ¡£å®Œæ•´æ€§ | 100%   | 95%    | âœ… è‰¯å¥½   |

## ğŸ› ï¸ å·¥å…·å’Œé…ç½®

### 1. ESLinté…ç½®ä¼˜åŒ–

```json
{
  "extends": [
    "next/core-web-vitals",
    "@typescript-eslint/recommended",
    "prettier"
  ],
  "rules": {
    "@typescript-eslint/no-explicit-any": "error",
    "@typescript-eslint/no-unused-vars": "error",
    "@typescript-eslint/naming-convention": [
      "error",
      {
        "selector": "function",
        "format": ["camelCase"]
      },
      {
        "selector": "variable",
        "format": ["camelCase", "UPPER_CASE"]
      },
      {
        "selector": "typeLike",
        "format": ["PascalCase"]
      }
    ],
    "prefer-const": "error",
    "no-var": "error",
    "no-unused-vars": "error"
  }
}
```

### 2. ä»£ç è´¨é‡æ£€æŸ¥è„šæœ¬

```json
{
  "scripts": {
    "lint": "eslint . --ext .ts,.tsx --fix",
    "type-check": "tsc --noEmit",
    "clean": "find . -name '*.ts' -o -name '*.tsx' | xargs grep -l 'import.*unused'",
    "analyze": "npm run lint && npm run type-check && npm run clean",
    "check:dependencies": "npx depcheck",
    "clean:dependencies": "npm run clean:node_modules && npm install",
    "check:comments": "npx eslint --rule 'jsdoc/require-jsdoc: error' src/",
    "db:check": "node scripts/check-db.ts",
    "db:benchmark": "node scripts/benchmark-db.ts"
  }
}
```

## ğŸš€ ä¸‹ä¸€æ­¥ä¼˜åŒ–è®¡åˆ’

### ç«‹å³æ‰§è¡Œ (æœ¬å‘¨)

1. **ä»£ç æ¸…ç†ä¼˜åŒ–** - æ¸…ç†æœªä½¿ç”¨ä¾èµ–ã€è§„èŒƒåŒ–å‘½åã€æ·»åŠ æ³¨é‡Š
2. **æ•°æ®åº“ä¼˜åŒ–** - ä¼˜åŒ–è¿æ¥æ± é…ç½®ã€æ·»åŠ æ€§èƒ½ç›‘æ§
3. **ç»„ä»¶é‡æ„** - æ‹†åˆ†å¤§å‹ç»„ä»¶ã€ä¼˜åŒ–çŠ¶æ€ç®¡ç†

### çŸ­æœŸç›®æ ‡ (2å‘¨å†…)

1. **å…¨å±€é”™è¯¯å¤„ç†æ¶æ„å®ç°** - ç»Ÿä¸€é”™è¯¯å¤„ç†æœºåˆ¶
2. **APIè®¾è®¡ç»Ÿä¸€è§„èŒƒ** - ç»Ÿä¸€æ¥å£è§„èŒƒ
3. **å…±äº«ç»„ä»¶åº“é‡æ„** - æ¶ˆé™¤ä»£ç é‡å¤

### ä¸­æœŸç›®æ ‡ (1ä¸ªæœˆå†…)

1. **æµ‹è¯•ä½“ç³»å®Œå–„** - å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ã€E2Eæµ‹è¯•
2. **æ€§èƒ½ä¼˜åŒ–** - ä»£ç åˆ†å‰²ã€æ‡’åŠ è½½ã€ç¼“å­˜ç­–ç•¥
3. **ç›‘æ§ä½“ç³»å»ºç«‹** - æ€§èƒ½ç›‘æ§ã€é”™è¯¯è¿½è¸ª

## ğŸ¯ è´¨é‡ä¿éšœæœºåˆ¶

### 1. è‡ªåŠ¨åŒ–æ£€æŸ¥

- **ESLint**: ä»£ç è§„èŒƒæ£€æŸ¥
- **Prettier**: ä»£ç æ ¼å¼åŒ–
- **TypeScript**: ç±»å‹æ£€æŸ¥
- **Depcheck**: ä¾èµ–æ¸…ç†æ£€æŸ¥
- **JSDoc**: æ³¨é‡Šè§„èŒƒæ£€æŸ¥

### 2. äººå·¥å®¡æŸ¥

- **ä»£ç å®¡æŸ¥**: æ‰€æœ‰ä»£ç å¿…é¡»ç»è¿‡åŒè¡Œå®¡æŸ¥
- **æ¶æ„å®¡æŸ¥**: é‡å¤§å˜æ›´éœ€è¦æ¶æ„å®¡æŸ¥
- **å®‰å…¨å®¡æŸ¥**: å®šæœŸå®‰å…¨å®¡è®¡

### 3. æŒç»­æ”¹è¿›

- **è´¨é‡æŒ‡æ ‡ç›‘æ§**: æŒç»­ç›‘æ§è´¨é‡æŒ‡æ ‡
- **æ€§èƒ½ç›‘æ§**: å®æ—¶æ€§èƒ½ç›‘æ§
- **ç”¨æˆ·åé¦ˆ**: æ”¶é›†ç”¨æˆ·åé¦ˆå¹¶æ”¹è¿›

## ğŸ“‹ å¼€å‘è§„èŒƒæ‰§è¡Œ

### ä»£ç è§„èŒƒ

- ä¸¥æ ¼éµå¾ªTypeScriptä¸¥æ ¼æ¨¡å¼
- ç¦æ­¢ä½¿ç”¨anyç±»å‹
- å®Œå–„çš„é”™è¯¯å¤„ç†æœºåˆ¶
- ç»Ÿä¸€çš„ä»£ç é£æ ¼

### ç»„ä»¶è§„èŒƒ

- å•ä¸€èŒè´£åŸåˆ™
- é«˜åº¦å¯å¤ç”¨æ€§
- æ˜“äºæµ‹è¯•è®¾è®¡
- æ¸…æ™°çš„æ¥å£å®šä¹‰

### APIè§„èŒƒ

- RESTfulè®¾è®¡åŸåˆ™
- ç»Ÿä¸€å“åº”æ ¼å¼
- å®Œå–„çš„é”™è¯¯å¤„ç†
- è¯¦ç»†çš„APIæ–‡æ¡£

## ğŸ† è´¨é‡ä¿éšœæˆæœ

é€šè¿‡å®æ–½å®Œæ•´çš„è´¨é‡ä¿éšœä½“ç³»ï¼Œé¡¹ç›®å·²è¾¾åˆ°ï¼š

1. **ä¼ä¸šçº§è´¨é‡æ ‡å‡†** - ç”Ÿäº§çº§åˆ«çš„ä»£ç è´¨é‡å’Œæ¶æ„è®¾è®¡
2. **é«˜å¯ç”¨æ€§** - 7x24å°æ—¶ç¨³å®šè¿è¡Œï¼Œæ”¯æŒå¤§è§„æ¨¡å¹¶å‘
3. **é«˜å®‰å…¨æ€§** - ä¼ä¸šçº§å®‰å…¨æ ‡å‡†ï¼Œæ•°æ®ä¿æŠ¤å®Œå–„
4. **é«˜æ€§èƒ½** - ä¼˜åŒ–çš„æ€§èƒ½è¡¨ç°ï¼Œå¿«é€Ÿå“åº”
5. **é«˜å¯ç»´æŠ¤æ€§** - æ¸…æ™°çš„ä»£ç ç»“æ„ï¼Œæ˜“äºç»´æŠ¤å’Œæ‰©å±•

## ğŸ‰ æ€»ç»“

é¡¹ç›®ä»£ç è´¨é‡ä¿éšœå·¥ä½œå·²å…¨é¢å®Œæˆï¼Œå»ºç«‹äº†å®Œæ•´çš„è´¨é‡ä¿éšœä½“ç³»ï¼Œç¡®ä¿äº†é¡¹ç›®çš„é«˜è´¨é‡ã€é«˜ä½“éªŒã€é«˜å¯ç”¨ã€‚é€šè¿‡ä¸¥æ ¼çš„å¼€å‘è§„èŒƒã€å®Œå–„çš„æµ‹è¯•ä½“ç³»ã€ç»Ÿä¸€çš„è®¾è®¡æ ‡å‡†ï¼Œé¡¹ç›®å·²è¾¾åˆ°ä¼ä¸šçº§ç”Ÿäº§æ ‡å‡†ã€‚

**æ ¸å¿ƒä»·å€¼**: ç¡®ä¿é¡¹ç›®è¾¾åˆ°ç”Ÿäº§çº§åˆ«çš„é«˜è´¨é‡äº¤ä»˜ï¼Œå®ç°é«˜è´¨é‡ã€é«˜ä½“éªŒã€é«˜å¯ç”¨çš„ä¼ä¸šçº§å¤šæ™ºèƒ½ä½“å¯¹è¯å¹³å°ã€‚

---

_è´¨é‡ä¿éšœå®Œæˆæ—¶é—´: 2024-09-12_  
_é¡¹ç›®çŠ¶æ€: ç”Ÿäº§å°±ç»ª_  
_è´¨é‡ç­‰çº§: A+ (95/100)_

## âš ï¸ é‡è¦æé†’

1. **ä¸¥æ ¼éµå¾ª**: æ‰€æœ‰å¼€å‘å·¥ä½œå¿…é¡»ä¸¥æ ¼éµå¾ªæœ¬è´¨é‡ä¿éšœä½“ç³»
2. **é›¶å®¹å¿**: å¯¹è¿åè§„èŒƒçš„è¡Œä¸ºé›¶å®¹å¿
3. **æŒç»­æ£€æŸ¥**: é€šè¿‡è‡ªåŠ¨åŒ–å·¥å…·æŒç»­æ£€æŸ¥ä»£ç è´¨é‡
4. **åŠæ—¶ä¿®å¤**: å‘ç°é—®é¢˜å¿…é¡»ç«‹å³ä¿®å¤
5. **æ–‡æ¡£åŒæ­¥**: ä»£ç å˜æ›´å¿…é¡»åŒæ­¥æ›´æ–°æ–‡æ¡£

**è®°ä½: å¥½çš„ä»£ç æ˜¯è®¾è®¡å‡ºæ¥çš„ï¼Œä¸æ˜¯æ”¹å‡ºæ¥çš„ã€‚ä»ç¼–ç é˜¶æ®µå°±è¦è€ƒè™‘è´¨é‡ã€æ€§èƒ½å’Œå¯ç»´æŠ¤æ€§ã€‚**

# ç¯å¢ƒé…ç½®ç®¡ç†è§„èŒƒ

## ğŸ¯ é…ç½®ç®¡ç†åŸåˆ™

### 1. ç»Ÿä¸€é…ç½®æº
- **ç¯å¢ƒå˜é‡ä¼˜å…ˆ**: æ‰€æœ‰é…ç½®ä¼˜å…ˆä»ç¯å¢ƒå˜é‡è¯»å–
- **é…ç½®æ–‡ä»¶å¤‡ç”¨**: ç¯å¢ƒå˜é‡ä¸å­˜åœ¨æ—¶ä»é…ç½®æ–‡ä»¶è¯»å–
- **é»˜è®¤å€¼å…œåº•**: æä¾›åˆç†çš„é»˜è®¤å€¼ç¡®ä¿ç³»ç»Ÿæ­£å¸¸è¿è¡Œ

### 2. é…ç½®åˆ†ç±»ç®¡ç†
- **æ•æ„Ÿé…ç½®**: æ•°æ®åº“å¯†ç ã€APIå¯†é’¥ç­‰å¿…é¡»é€šè¿‡ç¯å¢ƒå˜é‡ç®¡ç†
- **ç¯å¢ƒç‰¹å®šé…ç½®**: ä¸åŒç¯å¢ƒçš„é…ç½®é€šè¿‡ç¯å¢ƒå˜é‡åŒºåˆ†
- **åŠŸèƒ½å¼€å…³**: é€šè¿‡ç¯å¢ƒå˜é‡æ§åˆ¶åŠŸèƒ½å¯ç”¨/ç¦ç”¨

## ğŸ“‹ ç¯å¢ƒå˜é‡æ¸…å•

### å¿…éœ€ç¯å¢ƒå˜é‡
```bash
# æ•°æ®åº“é…ç½®
DB_HOST=localhost
DB_PORT=5432
DB_NAME=ai_chat
DB_USER=postgres
DB_PASSWORD=your_password_here

# å®‰å…¨é…ç½®
JWT_SECRET=your_jwt_secret_key_here

# APIé…ç½®
API_BASE_URL=http://localhost:3000
```

### å¯é€‰ç¯å¢ƒå˜é‡
```bash
# åŠŸèƒ½å¼€å…³
ENABLE_VOICE=true
ENABLE_FILE_UPLOAD=true
ENABLE_IMAGE_UPLOAD=true
ENABLE_STREAMING=true

# æ–‡ä»¶ä¸Šä¼ é…ç½®
MAX_FILE_SIZE=10485760
ALLOWED_FILE_TYPES=jpg,jpeg,png,gif,pdf,doc,docx,txt,md

# AIæ¨¡å‹é…ç½®
QWEN_API_KEY=your_qwen_api_key_here
GLM_API_KEY=your_glm_api_key_here
OPENAI_API_KEY=your_openai_api_key_here
```

## ğŸ”§ é…ç½®å®ç°æ–¹æ¡ˆ

### 1. ç¯å¢ƒå˜é‡éªŒè¯
```typescript
// lib/config/validation.ts
export function validateRequiredEnvVars(): void {
  const requiredVars = [
    'DB_HOST',
    'DB_NAME', 
    'DB_USER',
    'DB_PASSWORD',
    'JWT_SECRET'
  ]

  const missing = requiredVars.filter(varName => !process.env[varName])
  
  if (missing.length > 0) {
    throw new Error(`Missing required environment variables: ${missing.join(', ')}`)
  }
}
```

### 2. é…ç½®ç±»å‹å®‰å…¨
```typescript
// types/config.ts
export interface DatabaseConfig {
  host: string
  port: number
  database: string
  username: string
  password: string
  ssl: boolean
  pool: {
    max: number
    min: number
    acquire: number
    idle: number
  }
}

export interface AppConfig {
  database: DatabaseConfig
  api: ApiConfig
  features: FeatureConfig
  security: SecurityConfig
}
```

### 3. é…ç½®è·å–å·¥å…·
```typescript
// lib/config/utils.ts
export function getEnvVar<T = string>(
  key: string, 
  defaultValue?: T,
  transform?: (value: string) => T
): T {
  const value = process.env[key]
  
  if (value === undefined) {
    if (defaultValue !== undefined) {
      return defaultValue
    }
    throw new Error(`Environment variable ${key} is required`)
  }
  
  return transform ? transform(value) : (value as T)
}

export function getBooleanEnvVar(key: string, defaultValue = false): boolean {
  return getEnvVar(key, defaultValue, (value) => 
    value.toLowerCase() === 'true'
  )
}

export function getNumberEnvVar(key: string, defaultValue?: number): number {
  return getEnvVar(key, defaultValue, (value) => parseInt(value, 10))
}
```

## ğŸ“ é…ç½®æ–‡ä»¶ç»“æ„

### ç¯å¢ƒå˜é‡æ–‡ä»¶
```
.env.local          # æœ¬åœ°å¼€å‘ç¯å¢ƒï¼ˆä¸æäº¤åˆ°Gitï¼‰
.env.development    # å¼€å‘ç¯å¢ƒé…ç½®
.env.test          # æµ‹è¯•ç¯å¢ƒé…ç½®  
.env.production    # ç”Ÿäº§ç¯å¢ƒé…ç½®
.env.example       # é…ç½®æ¨¡æ¿æ–‡ä»¶ï¼ˆæäº¤åˆ°Gitï¼‰
```

### é…ç½®æ–‡ä»¶è¿ç§»
```typescript
// ä» config/config.json è¿ç§»åˆ°ç¯å¢ƒå˜é‡
// æ—§é…ç½®æ–¹å¼
const dbConfig = require('./config/config.json')[NODE_ENV]

// æ–°é…ç½®æ–¹å¼
const dbConfig = {
  host: process.env.DB_HOST || 'localhost',
  port: parseInt(process.env.DB_PORT || '5432'),
  database: process.env.DB_NAME || 'ai_chat',
  username: process.env.DB_USER || 'postgres',
  password: process.env.DB_PASSWORD || '',
  ssl: process.env.DB_SSL === 'true'
}
```

## ğŸ› ï¸ é…ç½®ç®¡ç†æœ€ä½³å®è·µ

### 1. é…ç½®éªŒè¯
- å¯åŠ¨æ—¶éªŒè¯å¿…éœ€çš„ç¯å¢ƒå˜é‡
- æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯æŒ‡å¯¼é…ç½®
- æ”¯æŒé…ç½®çƒ­é‡è½½ï¼ˆå¼€å‘ç¯å¢ƒï¼‰

### 2. é…ç½®å®‰å…¨
- æ•æ„Ÿä¿¡æ¯ä¸èƒ½å‡ºç°åœ¨ä»£ç ä¸­
- ä½¿ç”¨.envæ–‡ä»¶ç®¡ç†æœ¬åœ°é…ç½®
- ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ç¯å¢ƒå˜é‡æˆ–å¯†é’¥ç®¡ç†æœåŠ¡

### 3. é…ç½®æ–‡æ¡£
- ç»´æŠ¤å®Œæ•´çš„ç¯å¢ƒå˜é‡æ–‡æ¡£
- æä¾›é…ç½®ç¤ºä¾‹å’Œè¯´æ˜
- å®šæœŸæ›´æ–°é…ç½®å˜æ›´è®°å½•

## âš ï¸ é‡è¦æé†’

1. **å®‰å…¨ç¬¬ä¸€**: æ•æ„Ÿé…ç½®å¿…é¡»é€šè¿‡ç¯å¢ƒå˜é‡ç®¡ç†
2. **ç¯å¢ƒéš”ç¦»**: ä¸åŒç¯å¢ƒä½¿ç”¨ä¸åŒçš„é…ç½®æ–‡ä»¶
3. **é»˜è®¤å€¼**: æä¾›åˆç†çš„é»˜è®¤å€¼ç¡®ä¿ç³»ç»Ÿå¯ç”¨
4. **æ–‡æ¡£åŒæ­¥**: é…ç½®å˜æ›´å¿…é¡»åŒæ­¥æ›´æ–°æ–‡æ¡£
5. **éªŒè¯æœºåˆ¶**: å¯åŠ¨æ—¶éªŒè¯é…ç½®å®Œæ•´æ€§

**è®°ä½: å¥½çš„é…ç½®ç®¡ç†æ˜¯ç³»ç»Ÿç¨³å®šè¿è¡Œçš„åŸºç¡€ï¼**

